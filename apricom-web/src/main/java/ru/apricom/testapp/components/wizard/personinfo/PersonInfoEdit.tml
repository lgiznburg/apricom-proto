<html xmlns="http://www.w3.org/1999/xhtml" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">
<t:content>
<t:form t:id="personInfoForm" validate="personInfo" class="form-horizontal">
    <div class="form-group">
        <div class="col-sm-3">
            <t:label for="surname"/>*
            <t:textfield t:id="surname" value="personInfo.name.surname" validate="required" />
        </div>
        <div class="col-sm-3">
            <t:label for="firstName"/>*
            <t:textfield t:id="firstName" value="personInfo.name.firstName" validate="required" />
        </div>
        <div class="col-sm-3">
            <t:label for="patronymic"/>
            <t:textfield t:id="patronymic" value="personInfo.name.patronymic" />
        </div>
        <div class="col-sm-3">
            <t:label for="birthDate"/>*
            <t:datefield t:id="birthDate" value="proxyBirthDate" validate="required" format="prop:correctDateFormat" />
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-3">
            <t:label for="contactPhone"/>*
            <t:textfield t:id="contactPhone" value="personInfo.contactPhone" validate="required" />
        </div>
        <div class="col-sm-3">
            <t:label for="homePhone"/>
            <t:textfield t:id="homePhone" value="personInfo.homePhone"  />
        </div>
        <div class="col-sm-3">
            <t:label for="mobilePhone"/>
            <t:textfield t:id="mobilePhone" value="personInfo.mobilePhone"  />
        </div>
        <div class="col-sm-3">
            <t:label for="email"/>*
            <t:textfield t:id="email" value="entrant.email" validate="required,email" />
        </div>
    </div>

    <div class="row">
        <div class="col-sm-4">${message:registrationAddress}</div>
    </div>
    <t:wizard.personinfo.addressedit address="personInfo.registrationAddress"/>
    <div class="form-group">
        <div class="col">
            <t:checkbox t:id="addressesEqual" value="addressesNotEqual" t:mixins="triggerfragment" fragment="currentAddressZone"/>
            <t:label for="addressesEqual"/>
        </div>
    </div>
    <t:formfragment t:id="currentAddressZone" visible="addressesNotEqual">
        <div class="row">
            <div class="col-sm-4">${message:currentAddress}</div>
        </div>
        <t:wizard.personinfo.addressedit address="personInfo.currentAddress"/>
    </t:formfragment>

    <div class="row">
        <div class="col-sm-4"><h5>${message:idDocument}</h5></div>
    </div>

    <div class="form-group">
        <div class="col-sm-3">
            <t:label for="idDocumentType"/>*
            <t:select value="mainIdDocument.idDocumentType" t:id="idDocumentType" model="idDocumentTypeSelectModel"
                      blankOption="NEVER" zone="citizenshipZone"/>
        </div>
        <div class="col-sm-3">
            <t:label for="citizenship"/>
            <t:zone t:id="citizenshipZone" id="citizenshipZone" style="display:inline;">
                <t:if test="citizenshipRequired">
                    <t:textfield value="citizenship" t:id="citizenship" id="citizenship" t:mixins="autocomplete"
                                 t:autocomplete.minChars="3"/>
                    <p:else>
                        ${mainIdDocument.citizenship.name}
                    </p:else>
                </t:if>
            </t:zone>
        </div>
        <div class="col-sm-3">
            <t:label for="seriesNumber"/>*
            <t:textfield value="mainIdDocument.seriesNumber" t:id="seriesNumber" validate="required"/>
        </div>
        <div class="col-sm-3">
            <t:label for="idDocumentNumber"/>*
            <t:textfield value="mainIdDocument.idDocumentNumber" t:id="idDocumentNumber" validate="required"/>
        </div>
     </div>

    <div class="form-group">
        <div class="col-sm-6">
            <t:label for="issuedBy"/>*
            <t:textfield value="mainIdDocument.issuedBy" t:id="issuedBy" validate="required"/>
        </div>
        <div class="col-sm-3">
            <t:label for="issuedByCode"/>
            <t:textfield value="mainIdDocument.issuedByCode" t:id="issuedByCode" />
        </div>
        <div class="col-sm-3">
            <t:label for="proxyIssuanceDate"/>
            <t:datefield value="proxyIssuanceDate" t:id="proxyIssuanceDate" validate="required" format="prop:correctDateFormat"/>
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-4">
            <t:if test="fileAttached">
                ${mainIdDocument.file.fileName}
            </t:if>
        </div>
        <div class="col-sm-2"><t:label for="documentScan"/>*</div>
        <div class="col-sm-4"><t:upload value="documentScan" t:id="documentScan"/></div>
    </div>

    <div class="form-group">
        <div class="col-sm-offset-2 co-s-10">
            <t:submit class="btn btn-primary" value="${message:save-continue}"/>
            <t:eventlink event="cancel" class="btn btn-default">${message:cancel}</t:eventlink>
        </div>
    </div>
</t:form>
</t:content>
</html>